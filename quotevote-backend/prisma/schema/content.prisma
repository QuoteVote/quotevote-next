// Content models: Content, Creator, Domain, Collection

model Domain {
    id       String    @id @default(auto()) @map("_id") @db.ObjectId
    key      String    @unique
    name     String?
    created  DateTime  @default(now())

    // Relations
    contents Content[]

    @@map("domains")
}

model Creator {
    id       String    @id @default(auto()) @map("_id") @db.ObjectId
    name     String
    avatar   String?
    bio      String?
    created  DateTime  @default(now())

    // Relations
    contents Content[]

    @@index([name])
    @@map("creators")
}

model Content {
    id        String   @id @default(auto()) @map("_id") @db.ObjectId
    title     String
    creatorId String   @db.ObjectId
    domainId  String?  @db.ObjectId
    url       String?
    created   DateTime @default(now())

    // Relations
    creator   Creator  @relation(fields: [creatorId], references: [id])
    domain    Domain?  @relation(fields: [domainId], references: [id])

    @@index([creatorId])
    @@index([domainId])
    @@map("contents")
}

model Collection {
    id          String   @id @default(auto()) @map("_id") @db.ObjectId
    userId      String   @db.ObjectId
    name        String
    description String?
    postIds     String[] @db.ObjectId
    created     DateTime @default(now())
    updatedAt   DateTime @updatedAt

    @@index([userId])
    @@map("collections")
}